{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>

    {% load django_bootstrap5 %} {% bootstrap_css %}
    <link rel="stylesheet" href="{% static 'css/login.css' %}" />
  </head>
  <body>
    {% block content %}
    <section>
      <!-- mensaje de error con javascript y validacion del mensaje de exito de register-->
      {% if messages %}
      <div id="errorBox" class="error-box">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}" role="alert">
          <p>{{ message }}</p>
        </div>
        {% endfor %}
        <button
          type="button"
          class="btn-close"
          onclick="hideError()"
          aria-label="Close"
        ></button>
      </div>

      {% elif form.errors %}
      <div id="errorBox" class="error-box">
        <div class="alert alert-danger" role="alert">
          <p>Usuario o contraseña incorrectos. Inténtalo de nuevo.</p>
        </div>
        <button
          type="button"
          class="btn-close"
          onclick="hideError()"
          aria-label="Close"
        ></button>
      </div>

      {% elif next and user.is_authenticated %}
      <div id="errorBox" class="error-box">
        <div class="alert alert-danger" role="alert">
          <p>No tienes acceso a esta página. Inicia sesión con otra cuenta.</p>
        </div>
        <button
          type="button"
          class="btn-close"
          onclick="hideError()"
          aria-label="Close"
        ></button>
      </div>
      {% endif %}

      <script>
        function hideError() {
          const box = document.getElementById("errorBox");
          if (box) {
            box.style.display = "none";
          }
        }
      </script>

      <div class="contenedor">
        <div class="imagen">
          <img src="{% static 'logo.svg' %}" alt="Imagen de inicio de sesión" />
        </div>
        <div class="formulario">
          <form action="#" method="post">
            {% csrf_token %}
            <h2>Iniciar Sesión</h2>
            <div class="input-contenedor">
              <i class="fa-solid fa-user"></i>
              <input
                type="text"
                name="username"
                id="username"
                class="form-control"
                required
              />
              <label for="username" class="font-weight-bold"
                >Nombre de usuario</label
              >
            </div>

            <div class="input-contenedor">
              <i class="fa-solid fa-lock"></i>
              <input
                type="password"
                name="password"
                id="password"
                class="form-control"
                required
              />
              <label for="password" class="font-weight-bold">Contraseña</label>
            </div>

            <div class="olvidar">
              <a href="{% url 'landing' %}">Ir a la página de inicio</a>
            </div>

            <div>
              <button
                type="submit"
                class="btn btn-primary"
                style="
                  margin-top: 30px;
                  background-color: #5e81ac;
                  border: none;
                  color: rgb(0, 0, 0);
                "
              >
                Iniciar Sesión
              </button>
            </div>

            <div class="olvidar">
              <a href="{% url 'password_reset' %}">¿Olvidaste tu contraseña?</a>
            </div>

            <div class="olvidar">
              <a href="{% url 'register' %}"
                >¿No tienes una cuenta? Regístrate</a
              >
            </div>
          </form>
        </div>
      </div>
    </section>
    {% endblock %} {% bootstrap_javascript %}
  </body>
</html>
